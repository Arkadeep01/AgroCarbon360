<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Edit Report | AgroCarbon360</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="font-sans bg-green-50 min-h-screen flex flex-col"
      style="background: radial-gradient(circle at center, #ffffff 0%, #d1fae5 50%, #bbf7d0 100%); background-attachment: fixed;">  


  <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-md">
    <h1 class="text-2xl font-bold text-green-700 mb-6">✏️ Edit Report</h1>

    <form id="editForm" class="space-y-4">
      <div>
        <label class="block text-gray-700">Report Title</label>
        <input type="text" id="title" required class="w-full border rounded px-3 py-2" />
      </div>
      <div>
        <label class="block text-gray-700">Carbon Saved (kg CO₂)</label>
        <input type="number" id="carbon" required class="w-full border rounded px-3 py-2" />
      </div>
      <div>
        <label class="block text-gray-700">Status</label>
        <select id="status" class="w-full border rounded px-3 py-2">
          <option>Pending</option>
          <option>Approved</option>
          <option>Rejected</option>
        </select>
      </div>
      <button type="submit" class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700">Update</button>
    </form>

    <a href="reports.html" class="block text-center mt-4 text-green-600 hover:underline">← Back to Reports</a>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const reportId = parseInt(params.get("id"));
    let reports = JSON.parse(localStorage.getItem("reports")) || [];
    const report = reports.find(r => r.id === reportId);

    if (!report) {
      document.body.innerHTML = "<h2 class='text-red-600 text-xl'>❌ Report not found.</h2>";
    } else {
      document.getElementById("title").value = report.title;
      document.getElementById("carbon").value = parseInt(report.carbon);
      document.getElementById("status").value = report.status;

      document.getElementById("editForm").addEventListener("submit", function(e) {
        e.preventDefault();

        report.title = document.getElementById("title").value.trim();
        report.carbon = document.getElementById("carbon").value.trim() + " kg CO₂";
        report.status = document.getElementById("status").value;

        localStorage.setItem("reports", JSON.stringify(reports));
        window.location.href = "reports.html";
      });
    }
  </script>

</body>
</html>

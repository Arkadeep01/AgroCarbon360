<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Create Password | AgroCarbon360</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="font-sans bg-radial-green min-h-screen flex flex-col"
      style="background: radial-gradient(at 50%, #ffffff, #bbf7d0); background-attachment: fixed;">

  <!-- Navbar -->
  <header id="siteHeader" class="sticky top-0 z-50 mt-4 transition">
    <nav class="max-w-7xl mx-auto flex items-center justify-between px-6 py-3 bg-white shadow-md rounded-xl relative">
      <div class="flex items-center space-x-2">
        <span class="text-green-700 text-2xl">🌱</span>
        <a href="signup.html" class="text-2xl font-bold text-green-700">AgroCarbon360</a>
      </div>

      <!-- Desktop Links -->
      <div class="hidden md:flex items-center space-x-6 font-medium">
        <a href="index.html" class="px-3 py-1 rounded transition hover:bg-green-600 hover:text-white">Home</a>
        <a href="features.html" class="px-3 py-1 rounded transition hover:bg-green-600 hover:text-white">Features</a>

        <!-- Portal Dropdown -->
        <div class="relative group">
          <button class="px-3 py-1 rounded transition hover:bg-green-600 hover:text-white flex items-center">
            Portal ▾
          </button>
          <div class="absolute left-0 top-full mt-0 w-48 bg-white rounded-lg shadow-lg opacity-0 invisible 
                      group-hover:opacity-100 group-hover:visible transition duration-200">
            <a href="farmer.html" class="block px-4 py-2 hover:bg-green-600 hover:text-white">👩‍🌾 Farmer</a>
            <a href="fpo.html" class="block px-4 py-2 hover:bg-green-600 hover:text-white">🏢 FPO</a>
            <a href="verifier.html" class="block px-4 py-2 hover:bg-green-600 hover:text-white">🔍 Verifier</a>
            <a href="admin.html" class="block px-4 py-2 hover:bg-green-600 hover:text-white">⚙️ Admin</a>
          </div>
        </div>

        <a href="about.html" class="px-3 py-1 rounded transition hover:bg-green-600 hover:text-white">About Us</a>
        <a href="contact.html" class="px-3 py-1 rounded transition hover:bg-green-600 hover:text-white">Contact</a>
        <a href="help.html" class="px-3 py-1 rounded transition hover:bg-green-600 hover:text-white">Help & Support</a>
      </div>

      <!-- Back Button -->
      <div class="hidden md:flex">
        <a href="index.html" class="bg-green-600 text-white px-4 py-2 rounded-xl shadow hover:bg-green-700 transition">
          ← Back
        </a>
      </div>

      <!-- Mobile Hamburger -->
      <button id="menuBtn" class="md:hidden text-gray-700 text-3xl">☰</button>
    </nav>
  </header>

    <!-- Create Password Section -->
    <main class="flex-1 flex items-center justify-center px-4">
        <div class="bg-white p-10 rounded-2xl shadow-2xl w-full max-w-lg">
          <h2 class="text-3xl font-bold text-green-700 mb-6 text-center">Create Password</h2>
    
    <form id="passwordForm" class="space-y-5">
      <input type="password" id="password" placeholder="Enter Password" class="input" required />
      
      <!-- Password Rules -->
      <ul id="rules" class="text-sm text-gray-600 space-y-1">
        <li id="length" class="rule">❌ At least 8 characters</li>
        <li id="upper" class="rule">❌ At least 1 uppercase letter</li>
        <li id="lower" class="rule">❌ At least 1 lowercase letter</li>
        <li id="number" class="rule">❌ At least 1 number</li>
        <li id="special" class="rule">❌ At least 1 special character (!@#$%^&*)</li>
      </ul>

      <input type="password" id="confirmPassword" placeholder="Confirm Password" class="input" required />
      
      <button type="submit" class="w-full bg-green-600 text-white py-3 rounded-xl hover:bg-green-700 transition">Finish Signup</button>
    </form>
    
    <p class="text-sm text-center mt-6">
      Already have an account? 
      <a href="login.html" class="text-green-700 hover:underline font-medium">Login</a>
    </p>
  </div>

  <style>
    .input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid #d1d5db;
      border-radius: 0.75rem;
      outline: none;
      transition: box-shadow 0.2s;
    }
    .input:focus {
      box-shadow: 0 0 0 2px #10b981;
    }
    .valid { color: green; }
    .invalid { color: red; }
  </style>

  <script>
    const password = document.getElementById("password");
    const confirmPassword = document.getElementById("confirmPassword");
    const rules = {
      length: document.getElementById("length"),
      upper: document.getElementById("upper"),
      lower: document.getElementById("lower"),
      number: document.getElementById("number"),
      special: document.getElementById("special"),
    };

    password.addEventListener("input", () => {
      const val = password.value;
      updateRule(rules.length, val.length >= 8);
      updateRule(rules.upper, /[A-Z]/.test(val));
      updateRule(rules.lower, /[a-z]/.test(val));
      updateRule(rules.number, /[0-9]/.test(val));
      updateRule(rules.special, /[!@#$%^&*]/.test(val));
    });

    function updateRule(element, valid) {
      if (valid) {
        element.textContent = "✅ " + element.textContent.slice(2);
        element.classList.add("valid");
        element.classList.remove("invalid");
      } else {
        element.textContent = "❌ " + element.textContent.slice(2);
        element.classList.add("invalid");
        element.classList.remove("valid");
      }
    }

    document.getElementById("passwordForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const val = password.value;
      const confirm = confirmPassword.value;

      // Check all rules
      if (!(val.length >= 8 && /[A-Z]/.test(val) && /[a-z]/.test(val) && /[0-9]/.test(val) && /[!@#$%^&*]/.test(val))) {
        alert("Password does not meet all requirements!");
        return;
      }

      if (val !== confirm) {
        alert("Passwords do not match!");
        return;
      }

      alert("Signup Complete! ✅");
      window.location.href = "index.html"; // Redirect after completion
    });
  </script>
</body>
</html>
